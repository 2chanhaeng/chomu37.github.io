name: Upload Post

on:
  push:
    branches: [main]

jobs:
  trigger:
    runs-on: ubuntu-latest

    steps:
      - name: Upload Post
        run: |
          git config --global user.email "2chanhaeng@gmail.com"
          git config --global user.name "Auto Post Sync"
          git clone https://2chanhaeng:${{ secrets.pat }}@github.com/2chanhaeng/chomu37.github.io.git
          cd chomu37.github.io
          git remote add posts https://2chanhaeng:${{ secrets.pat }}@github.com/2chanhaeng/blog-posts.git
          git subtree pull --prefix=_posts posts main -m "post uploaded"
          git pull origin main
